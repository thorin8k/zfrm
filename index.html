<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title>ThGameFrm</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link  rel="stylesheet" type="text/css" href="./css/dbg.css"/>
        <style>
            #canvas {
                background-color: #CCC;

/*                background-image: -webkit-linear-gradient(45deg, gray 25%, transparent 25%, transparent 75%, gray 75%, gray), -webkit-linear-gradient(45deg, gray 25%, transparent 25%, transparent 75%, gray 75%, gray);

                background-image: -moz-linear-gradient(45deg, gray 25%, transparent 25%, transparent 75%, gray 75%, gray), -moz-linear-gradient(45deg, gray 25%, transparent 25%, transparent 75%, gray 75%, gray);    
                background-image: linear-gradient(45deg, gray 25%, transparent 25%, transparent 75%, gray 75%, gray), 
                    linear-gradient(45deg, gray 25%, transparent 25%, transparent 75%, black 75%, gray);

                background-size:60px 60px;
                background-position:0 0, 30px 30px*/
            }
        </style>
    </head>
    <body>
        <canvas id="canvas" width="640" height="480"></canvas>
        <script type="text/javascript" src="./js/libs/jquery/jquery.js"></script>
        <script type="text/javascript" src="./js/game/base/objects/Class.js"></script>
        <script type="text/javascript" src="./js/libs/canvasText/canvasText.js"></script>
        
        <!--<script type="text/javascript" src="./js/game.compiled.js"></script>-->
        
        <script type="text/javascript" src="./js/game/base/commons/Constants.js"></script>
        <script type="text/javascript" src="./js/game/base/commons/CollisionUtils.js"></script>
        <script type="text/javascript" src="./js/game/base/commons/Utils.js"></script>
        
        <script type="text/javascript" src="./js/game/base/components/FrameIntervalImpl.js"></script>
        
        
        <script type="text/javascript" src="./js/game/base/Game.js"></script>
        <script type="text/javascript" src="./js/game/base/components/LayerList.js"></script>
        <script type="text/javascript" src="./js/game/base/components/CanvasExt.js"></script>
        <script type="text/javascript" src="./js/game/base/components/ModuleTools.js"></script>
        <script type="text/javascript" src="./js/game/base/components/MessageContainer.js"></script>
        <script type="text/javascript" src="./js/game/base/components/AssetManager.js"></script>
        <script type="text/javascript" src="./js/game/base/components/SpriteSheet.js"></script>
        <script type="text/javascript" src="./js/game/base/components/Animation.js"></script>
        <script type="text/javascript" src="./js/game/base/components/FrameTimer.js"></script>
        <script type="text/javascript" src="./js/game/base/interfaces/iModule.js"></script>
        
        
        
        <script type="text/javascript" src="./js/game/base/objects/Object.js"></script>
        <script type="text/javascript" src="./js/game/base/objects/Clickable.js"></script>
        <script type="text/javascript" src="./js/game/base/objects/CursorMovable.js"></script>
        <script type="text/javascript" src="./js/game/base/objects/Image.js"></script>
        <script type="text/javascript" src="./js/game/base/objects/ObjectLayer.js"></script>
        <script type="text/javascript" src="./js/game/base/objects/LandscapeLayer.js"></script>
        <script type="text/javascript" src="./js/game/base/objects/Movement.js"></script>
        <script type="text/javascript" src="./js/game/base/objects/Collision.js"></script>
        <script type="text/javascript" src="./js/game/base/objects/LoadingScreen.js"></script>
        <script type="text/javascript" src="./js/game/base/objects/Light.js"></script>

        <script type="text/javascript" src="./js/game/ext/Rectangle.js"></script>
        <script type="text/javascript" src="./js/game/ext/Box.js"></script>
        <script type="text/javascript" src="./js/game/ext/Circle.js"></script>
        <script type="text/javascript" src="./js/game/ext/RectangleClick.js"></script>
        <script type="text/javascript" src="./js/game/ext/FirstPlayer.js"></script>
        <script type="text/javascript" src="./js/game/ext/MainMenu.js"></script>
        <script type="text/javascript" src="./js/game/ext/Enemy.js"></script>
        <script type="text/javascript" src="./js/game/ext/Text.js"></script>
        <script type="text/javascript" src="./js/game/ext/CollisionBox.js"></script>
        
        <script type="text/javascript" src="./js/game/modules/fpsModule.js"></script>
        <script type="text/javascript" src="./js/game/modules/LayerHandler.js"></script>
        <script type="text/javascript" src="./js/game/modules/CollisionManager.js"></script>
        <script type="text/javascript" src="./js/game/modules/LightManager.js"></script>
        <script type="text/javascript" src="./js/game/modules/DebugModule.js"></script>
        <script type="text/javascript" src="./js/game/modules/DebugConsole.js"></script>
        
        <script type="text/javascript">
            var game;
            
            $(document).ready(function(){
                game = new Game("canvas");
                
                //añadimos modulos
                game.addModule("LayerMod", new LayerHandler());
                game.addModule("CollisionManager", new CollisionManager());
                game.addModule("LightManager", new LightManager());
                game.addModule("DbgModule", new DebugModule());
                game.addModule("DbgConsole", new DebugConsole());
                game.addModule("fpsMod", new FpsModule());  
                
                // Añadimos algunas imágenes a la lista de descarga
                game.imageManager.addAsset('image','pokeset','img/pokeset.png');
                game.imageManager.addAsset('image','skeleton.png','img/Example-skeleton.png');
                game.imageManager.addAsset('image','zombie.png','img/Monster-zombie.png');
                game.imageManager.addAsset('image','link.png','img/test2.png');
                game.imageManager.addAsset('image','bgtest','img/squares.jpg');
                game.imageManager.addAsset('image','tilea1','img/tilea1.png');
                game.imageManager.addAsset('image','tilea2','img/tilea2.png');
                game.imageManager.addAsset('image','tilea3','img/tilea3.png');
                game.imageManager.addAsset('image','tilea4','img/tilea4.png');
                game.imageManager.addAsset('image','tilea5','img/tilea5.png');
                game.imageManager.addAsset('image','tileb','img/tileb.png');
                game.imageManager.addAsset('image','tilec','img/tilec.png');
                game.imageManager.addAsset('image','tiled','img/tiled.png');
                game.imageManager.addAsset('image','tilee','img/tilee.png');
                game.imageManager.addAsset('image','tilef','img/tilef.png');
                game.imageManager.addAsset('image','tileg','img/tileg.png');
                game.imageManager.addAsset('image','tilej','img/tilej.png');
                game.imageManager.addAsset('image','tilek','img/tilek.png');
                game.imageManager.addAsset('image','tilesetsall','img/tilesetsall.png');
                game.imageManager.addAsset('image','01_background','img/01_background.jpg');
                game.imageManager.addAsset('map','testcute','map/testcute.json');
                game.imageManager.addAsset('map','test2','map/test2.json');
                game.imageManager.addAsset('map','tileMap','map/tileMap5.json');

                game.startGame(afterGameLoad);

            });
            function afterGameLoad(){
//                game.messageContainer.speak({
//                    message : "#loadMap#",
//                    mapName : "tileMap"
//                });

//                var layer = new ObjectLayer();
//                layer.z = 6;
////                layer.addObject('menu',new MainMenu());
//                var fp = new FirstPlayer();
//                fp.x=200;
//                fp.y= 200;
//                fp.width= 64;
//                fp.height= 64;
//                fp.z= 4;
//                layer.addObject('fp',fp);
//
//
//                var sq1 = new Box();
//                sq1.x=100;
//                sq1.y=100;
//                sq1.width= 32;
//                sq1.height= 32;
//                sq1.z= 0;
//                layer.addObject('sq1',sq1);
//                var sq2 = new Box();
//                sq2.x=140;
//                sq2.y=140;
//                sq2.width= 32;
//                sq2.height= 32;
//                sq2.z= 0;
//                layer.addObject('sq2',sq2);
//                var sq3 = new Box();
//                sq3.x=175;
//                sq3.y=175;
//                sq3.width= 32;
//                sq3.height= 32;
//                sq3.z= 0;
//                layer.addObject('sq3',sq3);
//
//                var bg = new ImageObj(game.moduleTools.imageList['bgtest']);
//                bg.x = 0;
//                bg.y = 0;
//                bg.width = 1600;
//                bg.height = 1200;
//                bg.nSourceX = 0;
//                bg.nSourceY = 0;
//                bg.z = 0;
//                var layerBg = new LandscapeLayer();
//                layerBg.addImage(bg);
//                layer.z = 5;


//                game.addLayerToQueue('objects',layer);
//                game.addLayerToQueue('bg1',layerBg);
            }
//            setTimeout(function(){
//                game.callObjectMethods('centerOnScreen',null);
//            },200);
            //Event Handling
            window.addEventListener("keydown", function (eEvent) {
                if(document.activeElement.tagName=='BODY'){
                    game.executionKey(eEvent);
                }
            }, false);
            window.addEventListener("keyup", function (eEvent) {
                if(document.activeElement.tagName=='BODY'){
                    game.executionKey(eEvent);
                }
            }, false);
            window.addEventListener("click", function (eEvent) {
                if(document.activeElement.tagName=='BODY'){
                    game.executionKey(eEvent);
                }
            }, false);
            
            
        </script>
    </body>
</html>
